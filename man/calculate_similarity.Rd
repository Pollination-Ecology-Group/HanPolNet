% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_similarity.R
\name{calculate_similarity}
\alias{calculate_similarity}
\title{Calculate Pairwise Community Similarity}
\usage{
calculate_similarity(data, group_by = c("year", "plot_id"))
}
\arguments{
\item{data}{A data frame containing standardized abundance data, typically from
`get_plant_data(output = "standardized")`.}

\item{group_by}{A character vector specifying how to group samples for comparison.
Must be either `c("year", "plot_id")` (the default) or `"year"`.}
}
\value{
A list containing three elements:
  \item{global_similarity}{The overall mean similarity across all pairs.}
  \item{variation}{The standard deviation of similarity values across all pairs.}
  \item{similarity_matrix}{The full pairwise similarity matrix.}
}
\description{
Computes a similarity matrix for ecological communities using the Ruzicka
index (the quantitative version of the Jaccard index).
}
\details{
This function serves as a wrapper around `vegan::vegdist(method = "jaccard")`.
The Ruzicka similarity is calculated from the resulting distance object as
`1 - distance`.

The function can operate in two modes depending on the `group_by` argument:
\itemize{
  \item `group_by = c("year", "plot_id")`: This treats each unique plot-year
    combination as a distinct sample. The function returns a matrix comparing
    every sample to every other sample.
  \item `group_by = "year"`: This aggregates the data for each year by taking
    the mean abundance of each species across all plots. It then returns a
    matrix comparing each year's average community composition to every other year.
}
}
\examples{
# --- Example 1: Comparing aggregated years ---
std_data <- get_plant_data(output = "standardized")
year_sim <- calculate_similarity(std_data, group_by = "year")
print(year_sim$global_similarity)
print(year_sim$similarity_matrix)

# --- Example 2: Comparing individual plot-years for a subset ---
std_subset <- get_plant_data(years = 21:22, output = "standardized")
plot_sim <- calculate_similarity(std_subset, group_by = c("year", "plot_id"))

}
