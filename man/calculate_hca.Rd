% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_hca.R
\name{calculate_hca}
\alias{calculate_hca}
\title{Calculate the Heterospecific Co-flowering Abundance (HCA) Index}
\usage{
calculate_hca(data, focal_species = NULL, weights = NULL)
}
\arguments{
\item{data}{A data frame containing standardized abundance data, typically the
output of `get_plant_data(output = "standardized")`. Must contain 'year'
and 'plot_id' columns.}

\item{focal_species}{A single character string specifying the plant code of the
focal species. This species will be excluded from the HCA calculation. If
`NULL`, the sum is across all species present.}

\item{weights}{An optional named numeric vector where names are species codes
and values are the weights (`wi`). Species in the data that are not in this
vector will be assigned a weight of 0. If `NULL`, all species get a weight of 1.}
}
\value{
A data frame with three columns: `year`, `plot_id`, and `hca`.
}
\description{
This function calculates the abundance of co-flowering heterospecifics for
each plot and year from a standardized abundance dataset.
}
\details{
Calculation of HCA

The HCA index is calculated for each row (a unique plot-year combination) using
the formula:

$$HCA_{y,p} = sum_{i=1}^{N_{co}} w_i times text{Abundance}_i$$

Where:
\itemize{
  \item `HCA_{y,p}` is the Heterospecific Co-flowering Abundance for a given year `y` and plot `p`.
  \item `N_{co}` is the number of co-flowering heterospecific species in the dataset.
  \item `w_i` is the weight for species `i`. If not provided, it defaults to 1 for all species.
  \item `Abundance_i` is the standardized abundance of species `i` (ranging from 0 to 1).
}

## Interpreting the HCA Value
The HCA is an **unbounded cumulative score**, not a proportion.
\itemize{
  \item A value of **0** means there is no co-flowering heterospecific abundance in that plot (i.e., no other species were present).
  \item A **higher value** indicates a greater cumulative abundance of surrounding heterospecific plants. For example, with default weights of 1, an HCA of 2.5 could mean that five species were present, each at 50% of its maximum observed abundance (5 * 0.5), or that one species was at its maximum (1.0) and three others were at 50% abundance (1.0 + 3 * 0.5).
}
}
\examples{
# First, get standardized data for a few years
std_data <- get_plant_data(years = c(21, 22), output = "standardized")

# Calculate unweighted HCA, excluding 'Suc_pra' as the focal species
hca_values <- calculate_hca(std_data, focal_species = "Suc_pra")

head(hca_values)

}
