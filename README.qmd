---
title: "README"
format: html
editor: visual
---

# READ ME

# HanPolNet 

The goal of HanPolNet is to provide the data and functions necessary to analyze the interannual changes in plant-pollinator interaction networks, as detailed in <Your Manuscript Title>.

## Installation

You can install the development version of HanPolNet from [GitHub](https://github.com) with:

```{r}
#| echo: true
install.packages("devtools")
devtools::install_github("Pollination-Ecology-Group/HanPolNet") 
```

## Citation

If you use this package or its data in your research, please cite it as:

```{r}
citation("HanPolNet")
```

## Authors

This package was developed by Jakub Štenc with guidance and contributions from Larry (AI Assistant), a persona of Gemini, a large language model from Google.

## Purpose

This package serves to combine data collected during decade and half long lasting project called "Opylovači" now operated by Pollination Ecology Group and Flower Ecology Lab based at the Departments of Zoology and Botany, Faculty of Science, Charles University (Praha, CZE).

## How does this package works

### How Data is Organized in This Package

To ensure transparency and reproducibility, the data in this package follows a standard R package workflow, separating the raw source data from the clean, ready-to-use data. Think of it like a kitchen and a pantry.

#### `data/` (The Pantry)

This directory contains the final, clean datasets, saved in R's optimized `.rda` format. When you load the package, this data is immediately available for you to use in your analysis.

-   `plant_abundance`: A tidy data frame of plant counts, with year and plot ID as separate columns.

-   `plant_metadata`: A support table with information about each plant species, including their full name and counting method.

Think of the `data/` folder as a well-organized pantry, stocked with ingredients that are ready to be used in your analytical recipes.

#### `data-raw/` (The Kitchen)

This directory is the "kitchen" where the data was prepared. It contains:

1.  The original, raw data files (e.g., `.csv` files).

2.  The R scripts that were used to read, clean, and process the raw data into the final versions found in the `data/` folder.

This directory is part of the development source code but is **not included** in the final installed package. Its purpose is to provide a complete, reproducible trail from the original source files to the analysis-ready data. If you ever need to see exactly how the data was cleaned or want to start from the very beginning, the "recipe" is in here.

### What data are included in this package

-   `plant_abundance`: A tidy data frame of plant counts, with year and plot ID as separate columns.

-   `plant_metadata`: A support table with information about each plant species, including their full name and counting method.

### What functions are included in this package

before merging tables from different years, first check for lower and upper case sensitvyte




## Calculating the Heterospecific Co-flowering Abundance (HCA) Index

The primary analytical function in this package is `calculate_hca()`. It is designed to compute a community-level index of heterospecific plant abundance for each unique plot and year.

### The Formula

The function implements the following formula:

$$HCA_{y,p} = \sum_{i=1}^{N_{co}} w_i \times \text{Abundance}_i$$

Where:
* **$HCA_{y,p}$** is the Heterospecific Co-flowering Abundance for a given year `y` and plot `p`.
* **$N_{co}$** is the number of co-flowering heterospecific species being considered (i.e., all species except the `focal_species`).
* **$w_i$** is a weighting factor for each species `i`. By default, this is set to 1 for all species.
* **$\text{Abundance}_i$** is the standardized abundance of species `i`. This requires that the input data be on a common scale. The `get_plant_data(output = "standardized")` function is designed specifically to prepare data for this calculation.

### Interpreting the HCA Value

The HCA is an **unbounded cumulative score**, not a proportion. It represents the total standardized abundance of neighboring plants.

* A value of **0** indicates that no co-flowering heterospecifics were present in the plot.
* A **higher value** indicates a greater cumulative abundance of co-flowering partners. For example, with default weights of 1, an HCA of 2.5 could mean that five different species were present, each at 50% of its maximum observed abundance (5 * 0.5), or a different combination of fewer, more abundant species.
